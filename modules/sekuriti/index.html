<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.M.A.R.T Security AI - Dream OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #0f172a; color: white; }
        .glass-deep {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(16, 185, 129, 0.5); border-radius: 10px; }
        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-top-color: #10b981;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen">

<div class="max-w-6xl mx-auto p-4 fade-in">
    <!-- Header -->
    <div class="glass-deep rounded-[2rem] p-6 mb-6 relative overflow-hidden border border-emerald-500/30">
        <div class="absolute top-0 right-0 p-4 opacity-20">
            <i class="fas fa-fingerprint text-6xl text-emerald-500"></i>
        </div>
        <div class="flex justify-between items-center relative z-10">
            <div>
                <h2 class="text-3xl font-black text-emerald-400 tracking-tighter uppercase drop-shadow-lg">
                    S.M.A.R.T Security <span class="text-white">AI</span>
                </h2>
                <p class="text-sm text-emerald-200/70 font-mono mt-1">
                    <span class="animate-pulse inline-block w-2 h-2 bg-red-500 rounded-full mr-2"></span>
                    LIVE MONITORING â€¢ ISO 27001 COMPLIANT
                </p>
            </div>
            <div class="text-right hidden sm:block">
                <p class="text-[10px] uppercase tracking-widest text-emerald-500/50">Device Authorized</p>
                <p class="text-sm font-bold text-white">Redmi Note 9 Pro</p>
            </div>
        </div>
    </div>

    <!-- Status Cards -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 font-mono text-xs">
        <div class="glass-deep p-3 rounded-xl flex items-center justify-between border-l-2 border-blue-500">
            <span class="text-slate-400">STATUS SHIFT</span>
            <span id="ai-shift-status" class="font-bold text-blue-400">MENDETEKSI...</span>
        </div>
        <div class="glass-deep p-3 rounded-xl flex items-center justify-between border-l-2 border-emerald-500">
            <span class="text-slate-400">SAFE CORE (5KM)</span>
            <span id="ai-geo-status" class="font-bold text-emerald-400">CHECKING GPS</span>
        </div>
        <div class="glass-deep p-3 rounded-xl flex items-center justify-between border-l-2 border-purple-500">
            <span class="text-slate-400">PERSONEL AKTIF</span>
            <span id="ai-personnel-count" class="font-bold text-purple-400">3 ORANG</span>
        </div>
        <div class="glass-deep p-3 rounded-xl flex items-center justify-between border-l-2 border-yellow-500">
            <span class="text-slate-400">ANOMALI JADWAL</span>
            <span id="ai-anomaly-status" class="font-bold text-yellow-400">CLEAR</span>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="flex space-x-2 mb-6 bg-slate-800/50 p-1 rounded-full backdrop-blur-sm w-fit mx-auto border border-slate-700">
        <button class="tab-btn active px-6 py-2 rounded-full font-bold text-sm transition-all bg-emerald-500 text-white shadow-[0_0_15px_rgba(16,185,129,0.5)]" data-tab="laporan">
            <i class="fas fa-camera-retro mr-2"></i> Laporan 24 Jam
        </button>
        <button class="tab-btn px-6 py-2 rounded-full font-bold text-sm text-slate-400 hover:text-white transition-all" data-tab="jadwal">
            <i class="fas fa-calendar-alt mr-2"></i> AI Jadwal Sync
        </button>
    </div>

    <!-- TAB LAPORAN -->
    <div id="tab-laporan" class="tab-content">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Form Laporan -->
            <div class="glass-deep p-6 rounded-3xl relative border border-slate-700/50">
                <h3 class="text-lg font-bold mb-4 text-emerald-400 flex items-center">
                    <i class="fas fa-satellite-dish animate-pulse mr-2"></i> Transmisi Data
                </h3>

                <form id="sekuritiForm" class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block mb-1 text-xs font-mono text-slate-400">TANGGAL (AUTO)</label>
                            <input type="text" id="tanggal" readonly class="w-full p-3 rounded-xl bg-slate-900/50 border border-slate-700 text-white font-mono text-sm focus:outline-none focus:border-emerald-500 transition-colors">
                        </div>
                        <div>
                            <label class="block mb-1 text-xs font-mono text-slate-400">SHIFT AKTIF (AI)</label>
                            <input type="text" id="shift" readonly class="w-full p-3 rounded-xl bg-slate-900/50 border border-emerald-500/50 text-emerald-400 font-bold font-mono text-sm shadow-[inset_0_0_10px_rgba(16,185,129,0.2)]">
                        </div>
                    </div>

                    <div>
                        <label class="block mb-1 text-xs font-mono text-slate-400">PETUGAS JAGA (Pilih sesuai jadwal)</label>
                        <select id="petugas" required class="w-full p-3 rounded-xl bg-slate-800 border border-slate-700 text-white focus:ring-2 focus:ring-emerald-500">
                            <option value="">-- Pindai Petugas --</option>
                        </select>
                    </div>

                    <div class="relative group mt-2">
                        <label class="block mb-1 text-xs font-mono text-emerald-400">GEO-SCANNER KAMERA</label>
                        <div class="border-2 border-dashed border-emerald-500/50 rounded-xl p-4 text-center bg-emerald-900/10 hover:bg-emerald-900/20 transition-all cursor-pointer relative overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-emerald-500/10 to-transparent translate-y-[-100%] group-hover:animate-[scan_2s_ease-in-out_infinite]"></div>
                            <i class="fas fa-camera text-3xl text-emerald-500/70 mb-2"></i>
                            <p class="text-xs text-slate-300">Tap untuk Ambil Foto & Kunci GPS</p>
                            <input type="file" id="foto_sekuriti" accept="image/*" capture="camera" class="absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10">
                        </div>
                    </div>

                    <div>
                        <label class="block mb-1 text-xs font-mono text-slate-400">SITUASI / DESKRIPSI</label>
                        <textarea id="deskripsi" required rows="3" class="w-full p-3 rounded-xl bg-slate-800 border border-slate-700 text-white focus:ring-2 focus:ring-emerald-500 placeholder-slate-600" placeholder="Ketik laporan atau gunakan voice command..."></textarea>
                    </div>

                    <button type="submit" class="w-full bg-gradient-to-r from-emerald-600 to-teal-500 hover:from-emerald-500 hover:to-teal-400 text-white p-4 rounded-xl font-black tracking-widest uppercase shadow-[0_10px_20px_rgba(16,185,129,0.3)] transition-all active:scale-95 flex items-center justify-center">
                        <i class="fas fa-lock mr-2"></i> Enkripsi & Kirim
                    </button>
                    <div id="form-result" class="text-center text-sm font-mono mt-2"></div>
                </form>
            </div>

            <!-- Riwayat Laporan -->
            <div class="glass-deep p-6 rounded-3xl border border-slate-700/50 flex flex-col">
                <h3 class="text-lg font-bold mb-4 text-emerald-400 flex justify-between items-center">
                    <span><i class="fas fa-database mr-2"></i> Log Keamanan</span>
                    <button id="refresh-history" class="text-xs bg-slate-800 hover:bg-slate-700 text-white px-3 py-1 rounded-full transition-colors border border-slate-600">
                        <i class="fas fa-sync-alt"></i> Sync
                    </button>
                </h3>
                <div class="flex-grow overflow-y-auto pr-2 custom-scrollbar" id="history-container">
                    <div class="text-center py-10 opacity-50">
                        <div class="spinner border-emerald-500 mb-2"></div>
                        <p class="text-xs font-mono">Mengakses Database Supabase...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TAB JADWAL -->
    <div id="tab-jadwal" class="tab-content hidden">
        <!-- Matriks Jadwal (Hari Ini, Besok, Lusa) -->
        <div class="glass-deep p-6 rounded-3xl border border-slate-700/50 overflow-hidden relative mb-6">
            <h3 class="text-xl font-bold mb-4 text-white flex items-center">
                <i class="fas fa-calendar-check text-emerald-500 mr-2"></i> Matriks Jadwal Dream Team
            </h3>
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm text-left border-collapse">
                    <thead>
                        <tr class="text-xs font-mono text-emerald-500 uppercase bg-slate-900/50">
                            <th class="px-4 py-3 rounded-tl-xl">Personel</th>
                            <th class="px-4 py-3 border-l border-slate-700 text-center bg-emerald-900/20">Hari Ini (AI)</th>
                            <th class="px-4 py-3 border-l border-slate-700 text-center">Besok</th>
                            <th class="px-4 py-3 border-l border-slate-700 text-center rounded-tr-xl">Lusa</th>
                        </tr>
                    </thead>
                    <tbody id="jadwal-view-body" class="text-slate-300">
                        <!-- Akan diisi JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Editor Jadwal Master -->
        <div class="glass-deep p-6 rounded-3xl border border-emerald-500/30 overflow-hidden relative">
            <div class="flex justify-between items-center mb-4">
                <h4 class="text-lg font-bold text-emerald-400 flex items-center">
                    <i class="fas fa-edit mr-2"></i> Master Schedule Editor
                </h4>
                <select id="select-bulan" class="bg-slate-800 text-white p-2 rounded-xl border border-slate-700 text-xs">
                    <option value="2">Februari 2026</option>
                    <option value="3">Maret 2026</option>
                    <option value="4">April 2026</option>
                    <option value="5">Mei 2026</option>
                    <option value="6">Juni 2026</option>
                    <option value="7">Juli 2026</option>
                    <option value="8">Agustus 2026</option>
                    <option value="9">September 2026</option>
                    <option value="10">Oktober 2026</option>
                    <option value="11">November 2026</option>
                    <option value="12">Desember 2026</option>
                </select>
            </div>
            <div class="overflow-x-auto max-h-96 scroll-custom">
                <table class="min-w-full text-[10px] font-mono border-collapse">
                    <thead class="bg-slate-900 text-emerald-400 sticky top-0 z-10">
                        <tr id="header-tanggal">
                            <th class="p-2 border border-slate-700 bg-slate-900">PETUGAS</th>
                            <!-- header tanggal diisi JS -->
                        </tr>
                    </thead>
                    <tbody id="body-input-jadwal">
                        <!-- Akan diisi JS -->
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-4">
                <button id="generate-otomatis" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl text-sm font-bold mr-2">
                    <i class="fas fa-magic mr-2"></i> Generate Otomatis
                </button>
                <button id="save-master-jadwal" class="bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-xl text-sm font-bold">
                    <i class="fas fa-save mr-2"></i> SIMPAN JADWAL MASTER
                </button>
            </div>
            <p class="text-[9px] text-slate-500 mt-2 italic">
                * Kode: P (Pagi), M (Malam), L (Libur), CT (Cuti), S (Sore). Kosongkan = L.
            </p>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="./sekuriti.js"></script>
</body>
</html>